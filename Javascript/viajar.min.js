let atributos=new Array;$(document).ready(function(){steps(1),select_fiesta(),select_transfer(),setTimeout(()=>{checkScroll()},400),$(".mensaje-error").hide(),$("#fiestas").on("click",function(){window.location.href="https://www.salioviaje.com.uy/Viajar/?opcion=4"}),$("#aeropuerto").on("click",function(){window.location.href="https://www.salioviaje.com.uy/Viajar/?opcion=3"}),$("#paseo").on("click",function(){window.location.href="https://www.salioviaje.com.uy/Viajar/?opcion=2"}),$("#picada").on("click",function(){window.location.href="https://www.salioviaje.com.uy/Viajar/?opcion=1"}),5==$(".session-input").val()&&setTimeout(()=>{timeoutformulario(5)},500)});let checkScroll=()=>{let a=$(".scroll-input").val();if(null!=a&&""!=a){let b=document.getElementById(`${a}`).getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:b,behavior:"smooth"})}};function datavalue_oportunidades(){var a=document.getElementsByClassName("oportunidad").length;if($("#contador-oportunidades").html(a),0!=a)for(var b=0;b<a;b++){let c=$("#Opo-"+b).data("value");atributos.push(c)}}function abrirFormularioCotizacion(){window.location.href="https://www.salioviaje.com.uy/Viajar/?opcion=5",timeoutformulario(5)}function timeoutformulario(a){setTimeout(()=>{""!=a&&(window.location.hash="Cotizacion",5!=a&&(desplegar(document.getElementById("agendar"),$(".session-output").val()),select_usuario()))},1e3)}var step=1;let id_cotizacion,viaje,datos_traslado,datos_tour,datos_transfer_in,datos_transfer_out,datos_fiestaseventos_ida,datos_fiestaseventos_vuelta,datos_fiestaseventos_idavuelta,array_paradas_2=new Array;var count_paradas_2=0;let array_paradas_1=new Array;var count_paradas_1=0;function next(){steps(++step)}function finalizar(b,c,d){switch($("#modal").hide(),$("#modal").html(""),tipo=$("#select_users").val()){case"1":default:if(validacion("Translado",datos_traslado={FECHA_SALIDA:$("#fecha_salida").val(),DIRECCION_ORIGEN:$("#direccion_traslado_origen").val(),BARRIO_ORIGEN:$("#barrio_traslado_origen").val(),LOCALIDAD_ORIGEN:$("#localidad_traslado_origen").val(),DIRECCION_DESTINO:$("#direccion_traslado_destino").val(),BARRIO_DESTINO:$("#barrio_traslado_destino").val(),LOCALIDAD_DESTINO:$("#localidad_traslado_destino").val(),MASCOTAS:$("#mascotas_traslado").val(),CANTIDAD_PASAJEROS:$("#cant_pasajeros").val(),HORA:$("#hora").val(),OBSERVACIONES:$("#observaciones_traslado").val()})){if(verificar_fechas(datos_traslado.FECHA_SALIDA,null,0,datos_traslado.HORA)){if(1==b){if(2==c)1==d&&actualizar_direccion_usuario(datos_traslado.DIRECCION_ORIGEN,datos_traslado.BARRIO_ORIGEN,datos_traslado.LOCALIDAD_ORIGEN),guardar_cotizacion(datos_traslado,array_paradas_1,0,"traslados"),notificarTransportistas(),next(),setTimeout(()=>{$.ajax({type:"POST",url:"/Mail/mail-SalioViaje.php",data:{COTIZACION:id_cotizacion,TIPO:"Traslado",DATA:JSON.stringify(datos_traslado),PARADAS_IDA:JSON.stringify(array_paradas_1),PARADAS_VUELTA:JSON.stringify(array_paradas_2)},success:function(){console.log("se ejecuta")},complete:function(a){1==a.responseText?(steps(++step),vaciar_paradas()):console.log(a)}})},1e3);else{var a=[datos_traslado.DIRECCION_ORIGEN,datos_traslado.BARRIO_ORIGEN,datos_traslado.LOCALIDAD_ORIGEN];$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:3,data:a},success:function(a){console.log(a),$("#modal").css("display","flex"),$("#modal").html(a)}})}}}else $(".mensaje-error").show(),$(".mensaje-error").text("No puedes poner una fecha anterior a la actual.")}else console.log("No valido");break;case"2":if(validacion("Tour",datos_tour={FECHA_SALIDA:$("#fecha_salida_tour").val(),DIRECCION_SALIDA_TOUR:$("#direccion_salida_tour").val(),BARRIO_TOUR:$("#barrio_barrios").val(),LOCALIDAD_TOUR:$("#localidad_tour").val(),CANTIDAD_PASAJEROS:$("#cant_pasajeros_tour").val(),HORA:$("#hora_tour").val(),CIUDAD:$("#destino_tour").val(),DURACION:$("#duracion_tour").val(),MASCOTA:$("#mascota_tour").val(),OBSERVACIONES:$("#observaciones_tour").val()})){if(verificar_fechas(datos_tour.FECHA_SALIDA,null,0,datos_tour.HORA)){if(1==b){if(2==c)1==d&&actualizar_direccion_usuario(datos_tour.DIRECCION_SALIDA_TOUR,datos_tour.BARRIO_TOUR,datos_tour.LOCALIDAD_TOUR),guardar_cotizacion(datos_tour,array_paradas_1,0,"tour"),notificarTransportistas(),next(),setTimeout(()=>{$.ajax({type:"POST",url:"/Mail/mail-SalioViaje.php",data:{COTIZACION:id_cotizacion,TIPO:"Tour o Servicio por Hora",DATA:JSON.stringify(datos_tour),PARADAS_IDA:JSON.stringify(array_paradas_1),PARADAS_VUELTA:JSON.stringify(array_paradas_2)},success:function(a){},complete:function(a){1==a.responseText?(steps(++step),vaciar_paradas()):console.log(a)}})},1e3);else{var a=[datos_tour.DIRECCION_SALIDA_TOUR,datos_tour.BARRIO_TOUR,datos_tour.LOCALIDAD_TOUR];$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:3,data:a},success:function(a){console.log(a),$("#modal").css("display","flex"),$("#modal").html(a)}})}}}else $(".mensaje-error").show(),$(".mensaje-error").text("No puedes poner una fecha anterior a la actual.")}else console.log("No valido");break;case"3":var e=$("#select_transfer").val();switch(e){case"1":if(validacion("Transfer_in",datos_transfer_in={TIPO_TRANSFER:"Transfer In",FECHA_ARRIBO:$("#fecha_regreso_transfer_in").val(),CANTIDAD_PASAJEROS:$("#cant_pasajeros_transfer_in").val(),HORA:$("#hora_transfer_in").val(),DIRECCION_DESTINO:$("#direccion_transfer_in").val(),BARRIO_DESTINO:$("#barrio_transfer_in").val(),LOCALIDAD_DESTINO:$("#localidad_transfer_in").val(),PUNTO_ORIGEN:$("#aeropuerto_transfer_in").val(),EQUIPAJE:$("#equipaje_transfer_in").val(),MASCOTAS:$("#mascotas_transfer_in").val(),OBSERVACIONES:$("#observaciones_transfer_in").val(),NRO_VUELO_BARCO:$("#nro_vuelo_barco_in").val()})){if(verificar_fechas(datos_transfer_in.FECHA_ARRIBO,null,0,datos_transfer_in.HORA)){if(1==b){if(2==c)1==d&&actualizar_direccion_usuario(datos_transfer_in.DIRECCION_DESTINO,datos_transfer_in.BARRIO_DESTINO,datos_transfer_in.LOCALIDAD_DESTINO),guardar_cotizacion(datos_transfer_in,array_paradas_1,0,"transferIn"),notificarTransportistas(),next(),setTimeout(()=>{$.ajax({type:"POST",url:"/Mail/mail-SalioViaje.php",data:{COTIZACION:id_cotizacion,TIPO:"Transfer de Arribo",DATA:JSON.stringify(datos_transfer_in),PARADAS_IDA:JSON.stringify(array_paradas_1),PARADAS_VUELTA:JSON.stringify(array_paradas_2)},success:function(a){},complete:function(a){1==a.responseText?(steps(++step),vaciar_paradas()):console.log(a)}})},1e3);else{var a=[datos_transfer_in.DIRECCION_DESTINO,datos_transfer_in.BARRIO_DESTINO,datos_transfer_in.LOCALIDAD_DESTINO];$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:3,data:a},success:function(a){console.log(a),$("#modal").css("display","flex"),$("#modal").html(a)}})}}}else $(".mensaje-error").show(),$(".mensaje-error").text("No puedes poner una fecha anterior a la actual.")}else console.log("No valido");break;case"2":if(validacion("Transfer_out",datos_transfer_out={TIPO_TRANSFER:"Transfer Out",FECHA_PARTIDA:$("#fecha_salida_transfer_out").val(),CANTIDAD_PASAJEROS:$("#cant_pasajeros_transfer_out").val(),HORA:$("#hora_transfer_out").val(),DIRECCION_ORIGEN:$("#direccion_transfer_out").val(),BARRIO_ORIGEN:$("#barrio_transfer_out").val(),LOCALIDAD_ORIGEN:$("#localidad_transfer_out").val(),PUNTO_DESTINO:$("#aeropuerto_transfer_out").val(),EQUIPAJE:$("#equipaje_transfer_out").val(),MASCOTAS:$("#mascotas_transfer_out").val(),OBSERVACIONES:$("#observaciones_transfer_out").val(),NRO_VUELO_BARCO:$("#nro_vuelo_barco_out").val()})){if(verificar_fechas(datos_transfer_out.FECHA_PARTIDA,null,0,datos_transfer_out.HORA)){if(1==b){if(2==c)1==d&&actualizar_direccion_usuario(datos_transfer_out.DIRECCION_ORIGEN,datos_transfer_out.BARRIO_ORIGEN,datos_transfer_out.LOCALIDAD_ORIGEN),guardar_cotizacion(datos_transfer_out,array_paradas_1,0,"transferOut"),notificarTransportistas(),next(),setTimeout(()=>{$.ajax({type:"POST",url:"/Mail/mail-SalioViaje.php",data:{COTIZACION:id_cotizacion,TIPO:"Transfer de Partida",DATA:JSON.stringify(datos_transfer_out),PARADAS_IDA:JSON.stringify(array_paradas_1),PARADAS_VUELTA:JSON.stringify(array_paradas_2)},success:function(a){},complete:function(a){1==a.responseText?(steps(++step),vaciar_paradas()):console.log(a)}})},1e3);else{var a=[datos_transfer_out.DIRECCION_ORIGEN,datos_transfer_out.BARRIO_ORIGEN,datos_transfer_out.LOCALIDAD_ORIGEN];$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:3,data:a},success:function(a){console.log(a),$("#modal").css("display","flex"),$("#modal").html(a)}})}}}else $(".mensaje-error").show(),$(".mensaje-error").text("No puedes poner una fecha anterior a la actual.")}else console.log("No valido")}break;case"4":var f=$("#select_fiesta").val();switch(console.log(array_paradas_1),console.log(array_paradas_2),f){case"1":default:if(validacion("FIESTA-IDA",datos_fiestaseventos_ida={TRAMOS_FIESTA:"Solo Ida",FECHA_SALIDA:$("#fecha_salida_fiestas_ida").val(),DIRECCION_ORIGEN:$("#direccion_fiestas_ida").val(),BARRIO_ORIGEN:$("#barrio_fiestas_ida").val(),LOCALIDAD_ORIGEN:$("#localidad_fiestas_ida").val(),PUNTO_DESTINO:$("#destino_fiesta_ida").val(),BARRIO_DESTINO:$("#fiestasida_origen_barrios").val(),CANTIDAD_PASAJEROS_IDA:$("#cant_pasajeros_fiesta_ida").val(),HORA:$("#hora_fiesta_ida").val(),MASCOTAS:$("#mascotas_fiestas_ida").val(),OBSERVACIONES:$("#observaciones_fiesta_ida").val()})){if(verificar_fechas(datos_fiestaseventos_ida.FECHA_SALIDA,null,0,datos_fiestaseventos_ida.HORA)){if(1==b){if(2==c)1==d&&actualizar_direccion_usuario(datos_fiestaseventos_ida.DIRECCION_ORIGEN,datos_fiestaseventos_ida.BARRIO_ORIGEN,datos_fiestaseventos_ida.LOCALIDAD_ORIGEN),guardar_cotizacion(datos_fiestaseventos_ida,array_paradas_1,0,"fiestasIda"),notificarTransportistas(),next(),setTimeout(()=>{$.ajax({type:"POST",url:"/Mail/mail-SalioViaje.php",data:{COTIZACION:id_cotizacion,TIPO:"Fiesta o Evento - Ida",DATA:JSON.stringify(datos_fiestaseventos_ida),PARADAS_IDA:JSON.stringify(array_paradas_1),PARADAS_VUELTA:JSON.stringify(array_paradas_2)},success:function(a){},complete:function(a){1==a.responseText?(steps(++step),vaciar_paradas()):console.log(a)}})},1e3);else{var a=[datos_fiestaseventos_ida.DIRECCION_ORIGEN,datos_fiestaseventos_ida.BARRIO_ORIGEN,datos_fiestaseventos_ida.LOCALIDAD_ORIGEN];$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:3,data:a},success:function(a){console.log(a),$("#modal").css("display","flex"),$("#modal").html(a)}})}}}else $(".mensaje-error").show(),$(".mensaje-error").text("No puedes poner una fecha anterior a la actual.")}else console.log("No valido");break;case"2":if(validacion("FIESTA-VUELTA",datos_fiestaseventos_vuelta={TRAMOS_FIESTA:"Solo Vuelta",FECHA_REGRESO:$("#fecha_regreso_fiestas_vuelta").val(),DIRECCION_DESTINO:$("#direccion_fiesta_vuelta").val(),BARRIO_DESTINO:$("#barrio_fiesta_vuelta").val(),LOCALIDAD_DESTINO:$("#localidad_fiesta_vuelta").val(),PUNTO_ORIGEN:$("#origen_fiestas_vuelta").val(),BARRIO_ORIGEN:$("#fiestasvuelta_origen_barrios").val(),CANTIDAD_PASAJEROS_VUELTA:$("#cant_pasajeros_fiesta_vuelta").val(),HORA:$("#hora_fiesta_vuelta").val(),MASCOTAS:$("#mascotas_fiestas_vuelta").val(),OBSERVACIONES:$("#observaciones_fiesta_vuelta").val()})){if(verificar_fechas(datos_fiestaseventos_vuelta.FECHA_REGRESO,null,0,datos_fiestaseventos_vuelta.HORA)){if(1==b){if(2==c)1==d&&actualizar_direccion_usuario(datos_fiestaseventos_vuelta.DIRECCION_DESTINO,datos_fiestaseventos_vuelta.BARRIO_DESTINO,datos_fiestaseventos_vuelta.LOCALIDAD_DESTINO),guardar_cotizacion(datos_fiestaseventos_vuelta,0,array_paradas_2,"fiestasVuelta"),notificarTransportistas(),next(),setTimeout(()=>{$.ajax({type:"POST",url:"/Mail/mail-SalioViaje.php",data:{COTIZACION:id_cotizacion,TIPO:"Fiesta o Evento - Vuelta",DATA:JSON.stringify(datos_fiestaseventos_vuelta),PARADAS_IDA:JSON.stringify(array_paradas_1),PARADAS_VUELTA:JSON.stringify(array_paradas_2)},success:function(a){},complete:function(a){1==a.responseText?(steps(++step),vaciar_paradas()):console.log(a.responseText)}})},1e3),console.log(datos_fiestaseventos_ida),console.log(array_paradas_2);else{var a=[datos_fiestaseventos_vuelta.DIRECCION_DESTINO,datos_fiestaseventos_vuelta.BARRIO_DESTINO,datos_fiestaseventos_vuelta.LOCALIDAD_DESTINO];$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:3,data:a},success:function(a){console.log(a),$("#modal").css("display","flex"),$("#modal").html(a)}})}}}else $(".mensaje-error").show(),$(".mensaje-error").text("No puedes poner una fecha anterior a la actual.")}else console.log("No valido");break;case"3":if(validacion("FIESTA-IDA-VUELTA",datos_fiestaseventos_idavuelta={TRAMOS_FIESTA:"Ida y Vuelta",FECHA_SALIDA:$("#fecha_salida_fiestas_idavuelta").val(),DIRECCION_ORIGEN:$("#direccion_ida_origen_fiestas_idavuelta").val(),BARRIO_ORIGEN:$("#barrio_ida_origen_fiestas_idavuelta").val(),LOCALIDAD_ORIGEN:$("#localidad_ida_origen_fiestas_idavuelta").val(),DIRECCION_DESTINO:$("#direccion_ida_destino_fiestas_idavuelta").val(),BARRIO_DESTINO:$("#barrio_ida_destino_fiestas_idavuelta").val(),LOCALIDAD_DESTINO:$("#localidad_ida_destino_fiestas_idavuelta").val(),HORA_SALIDA:$("#hora_ida_fiestas_idavuelta").val(),CANTIDAD_PASAJEROS_IDA:$("#cant_pasajeros_ida_fiestas_idavuelta").val(),FECHA_REGRESO:$("#fecha_regreso_fiestas_idavuelta").val(),DIRECCION_ORIGEN_VUELTA:$("#direccion_vuelta_origen_fiestas_idavuelta").val(),BARRIO_ORIGEN_VUELTA:$("#barrio_vuelta_origen_fiestas_idavuelta").val(),LOCALIDAD_ORIGEN_VUELTA:$("#localidad_vuelta_origen_fiestas_idavuelta").val(),DIRECCION_DESTINO_VUELTA:$("#direccion_vuelta_destino_fiestas_idavuelta").val(),BARRIO_DESTINO_VUELTA:$("#barrio_vuelta_destino_fiestas_idavuelta").val(),LOCALIDAD_DESTINO_VUELTA:$("#localidad_vuelta_destino_fiestas_idavuelta").val(),HORA_REGRESO:$("#hora_vuelta_fiestas_idavuelta").val(),CANTIDAD_PASAJEROS_VUELTA:$("#cant_pasajeros_vuelta_fiestas_idavuelta").val(),MASCOTAS:$("#mascotas_fiestas_idavuelta").val(),OBSERVACIONES:$("#observaciones_fiesta_idavuelta").val()})){if(verificar_fechas(datos_fiestaseventos_idavuelta.FECHA_SALIDA,datos_fiestaseventos_idavuelta.FECHA_REGRESO,1,datos_fiestaseventos_idavuelta.HORA_SALIDA,datos_fiestaseventos_idavuelta.HORA_REGRESO)){if(1==b){if(2==c)1==d&&actualizar_direccion_usuario(datos_fiestaseventos_idavuelta.DIRECCION_ORIGEN,datos_fiestaseventos_idavuelta.BARRIO_ORIGEN,datos_fiestaseventos_idavuelta.LOCALIDAD_ORIGEN),guardar_cotizacion(datos_fiestaseventos_idavuelta,array_paradas_1,array_paradas_2,"fiestasIdaVuelta"),notificarTransportistas(),next(),setTimeout(()=>{$.ajax({type:"POST",url:"/Mail/mail-SalioViaje.php",data:{COTIZACION:id_cotizacion,TIPO:"Fiesta o Evento - Ida y Vuelta",DATA:JSON.stringify(datos_fiestaseventos_idavuelta),PARADAS_IDA:JSON.stringify(array_paradas_1),PARADAS_VUELTA:JSON.stringify(array_paradas_2)},success:function(a){},complete:function(a){1==a.responseText?(steps(++step),vaciar_paradas()):console.log(a.responseText)}})},1e3);else{var a=[datos_fiestaseventos_idavuelta.DIRECCION_ORIGEN,datos_fiestaseventos_idavuelta.BARRIO_ORIGEN,datos_fiestaseventos_idavuelta.LOCALIDAD_ORIGEN];$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:3,data:a},success:function(a){console.log(a),$("#modal").css("display","flex"),$("#modal").html(a)}})}}}else $(".mensaje-error").show(),$(".mensaje-error").text("No puedes poner una fecha anterior a la actual.")}else console.log("No valido")}}}function actualizar_direccion_usuario(a,b,c){$.ajax({type:"POST",url:"/PHP/procedimientosForm.php",data:{tipo:"actualizar_direccion_usuario",direccion:a,barrio:b,localidad:c},success:function(a){console.log(a)}})}function guardar_cotizacion(a,b,c,d){$.ajax({type:"POST",url:"/PHP/procedimientosForm.php",data:{tipo:"agregar_cotizacion",datos:JSON.stringify(a),PARADAS_IDA:JSON.stringify(b),PARADAS_VUELTA:JSON.stringify(c),tipo_cotizacion:d},success:function(a){id_cotizacion=a}})}function verificar_fechas(a,b,f,e,d){if(console.log(d),null!=b&&null!=d)var d=d.split(":"),b=b.split("-"),b=new Date(b[0],b[1],b[2],d[0],d[1]);var a=a.split("-"),e=e.split(":"),c=new Date,g=String(c.getDate()).padStart(2,"0"),h=String(c.getMonth()+1).padStart(2,"0"),i=c.getFullYear(),j=String(c.getHours()),k=String(c.getMinutes()),a=new Date(a[0],a[1],a[2],e[0],e[1]),c=new Date(i,h,g,j,k);return 1==f?a<=b&&a>=c&&b>c:a>=c}function restarHoras(a,b){return inicioMinutos=parseInt(a.substr(3,2)),inicioHoras=parseInt(a.substr(0,2)),finMinutos=parseInt(b.substr(3,2)),finHoras=parseInt(b.substr(0,2)),transcurridoMinutos=finMinutos-inicioMinutos,transcurridoHoras=finHoras-inicioHoras,transcurridoMinutos<0&&(transcurridoHoras--,transcurridoMinutos=60+transcurridoMinutos),horas=transcurridoHoras.toString(),minutos=transcurridoMinutos.toString(),horas.length<2&&(horas="0"+horas),horas.length<2&&(horas="0"+horas),parseInt(horas)}function verificar_largo_fiesta(){-6>=restarHoras($("#hora_ida_fiestas_idavuelta").val(),$("#hora_vuelta_fiestas_idavuelta").val())||restarHoras($("#hora_ida_fiestas_idavuelta").val(),$("#hora_vuelta_fiestas_idavuelta").val())>=6?($(".mensaje-error").html("El evento por el que estas consultando tiene una duracion superior a las 6h quieres continuar?"),$(".mensaje-error").css("color","rgb(255, 211, 91)"),$(".mensaje-error").show()):$(".mensaje-error").hide()}function vaciar_paradas(){array_paradas_1=[],array_paradas_2=[],count_paradas_1=0,count_paradas_2=0,$("#tags_paradas_1").html(" "),$("#tags_paradas_2").html(" ")}function volver(){steps(--step),$("#select_users").val(0)}function steps(b){$(".step_1").hide(),$(".step_2_traslado").hide(),$(".step_2_tour").hide(),$(".step_2_transfer").hide(),$(".step_2_fiestas").hide(),$(".step_3").hide(),$(".step_4").hide(),$(".step_5").hide(),$("#paradas_vuelta").hide(),$(".mensaje-error").css("color","#ff635a");var a=document.getElementById("Cotizacion");switch(b){case 1:$(".step_1").show(),$(".progress").css("width","0%"),$(".circle1").css("background-color","#2b3179"),$(".circle2").css("background-color","#aaa"),$(".circle3").css("background-color","#aaa");break;case 2:switch(a.scrollIntoView(),""!=$(".session-input").val()&&null!=$(".session-input").val()?"5"!=$(".session-input").val()&&(viaje=$(".session-input").val()):(viaje=$("#select_users").val(),console.log(viaje)),$(".loader_step3").hide(),$(".step_3").show(),console.log(viaje),viaje){case"1":$(".step_2_traslado").show(),$(".session-input").val(),$(".session-input").val(""),1!=getCookie("g7")&&openGurucuteco(7);break;case"2":$(".step_2_tour").show(),$(".session-input").val(),$(".session-input").val(""),1!=getCookie("g6")&&openGurucuteco(6);break;case"3":$(".step_2_transfer").show(),$(".session-input").val(),$(".session-input").val(""),$(".step_3").hide(),1!=getCookie("g5")&&openGurucuteco(5);break;case"4":$(".step_2_fiestas").show(),$(".session-input").val(),$(".session-input").val(""),$(".step_3").hide(),1!=getCookie("g4")&&openGurucuteco(4)}$(".progress").css("width","50%"),$(".circle1").css("background-color","#2b3179"),$(".circle2").css("background-color","#2b3179"),$(".circle3").css("background-color","#aaa");break;case 3:a.scrollIntoView(),$(".step_4").show(),$(".progress-bar").hide();break;case 4:$(".progress").css("width","100%"),$(".circle1").css("background-color","#2b3179"),$(".circle2").css("background-color","#2b3179"),$(".circle3").css("background-color","#2b3179"),a.scrollIntoView(),$(".step_5").show(),$(".progress-bar").hide()}}function nueva_cotizacion(){steps(step=1)}function select_usuario(b){if(console.log("Opci\xf3n: "+$("#select_users").val()),""!=$(".session-input").val()&&5!=$(".session-input").val()&&1!=b){console.log("---------");let a=$(".session-input").val();$("#select_users").val(a),viaje=a,next()}else console.log("++++++++"),viaje=$("#select_users").val(),next()}function desplegar(a,b){1==b?setTimeout(()=>{location.href="/Login"},500):(a.classList.toggle("active"),a.nextElementSibling.classList.toggle("show"),""!=$(".session-input").val()&&document.getElementById("Cotizacion").scrollIntoView())}function paradas(a){switch(a){case 1:parada=$("#paradas_1").val(),console.log(array_paradas_1.indexOf(parada)),-1==array_paradas_1.indexOf(parada)?(array_paradas_1[count_paradas_1]=parada,$.ajax({type:"POST",url:"/PHP/Tablas/agregarParada.php",data:{NRO_PARADA:count_paradas_1,NOMBRE_PARADA:parada,TIPO:1},success:function(a){$("#tags_paradas_1").append(a),$("#paradas_1").val(""),console.log(array_paradas_1)}}),count_paradas_1++):console.log("la parada ya existe");break;case 2:parada=$("#paradas_2").val(),console.log(array_paradas_2.indexOf(parada)),-1==array_paradas_2.indexOf(parada)&&(array_paradas_2[count_paradas_2]=parada,$.ajax({type:"POST",url:"/PHP/Tablas/agregarParada.php",data:{NRO_PARADA:count_paradas_2,NOMBRE_PARADA:parada,TIPO:2},success:function(a){$("#tags_paradas_2").append(a),$("#paradas_2").val("")}}),count_paradas_2++)}}function borrar_parada(a,b){switch(b){case 1:delete array_paradas_1[a],$("#R"+a).remove(),console.log(array_paradas_1);break;case 2:delete array_paradas_2[a],$("#R"+a).remove(),console.log(array_paradas_2)}}function select_fiesta(){switch(tipo=$("#select_fiesta").val(),$("#fiesta_ida").hide(),$("#fiesta_vuelta").hide(),$("#fiesta_idavuelta").hide(),tipo){case"1":$("#fiesta_ida").show(),$("#fiesta_vuelta").hide(),$("#fiesta_idavuelta").hide(),$(".step_3").show();break;case"2":$("#fiesta_ida").hide(),$("#fiesta_vuelta").show(),$("#fiesta_idavuelta").hide(),$(".step_3").show();break;case"3":$("#fiesta_ida").hide(),$("#fiesta_vuelta").hide(),$("#fiesta_idavuelta").show(),$(".step_3").show();break;default:$("#fiesta_ida").hide(),$("#fiesta_vuelta").hide(),$("#fiesta_idavuelta").hide(),$(".step_3").hide()}}function select_transfer(){switch(tipo=$("#select_transfer").val(),$("#transfer_in").hide(),$("#transfer_out").hide(),tipo){case"1":$("#transfer_in").show(),$("#transfer_out").hide(),$(".step_3").show();break;case"2":$("#transfer_in").hide(),$("#transfer_out").show(),$(".step_3").show();break;default:$("#transfer_in").hide(),$("#transfer_out").hide(),$(".step_3").hide()}}function validacion(d,b){console.log(b);let a,c=!1;switch(reset_errores(),d){case"Translado":a=$.ajax({type:"POST",url:"/PHP/Validaciones.php",data:{tipo:"Translado",datos:JSON.stringify(b)},global:!1,async:!1,success:function(a){return a}}).responseText,console.log(a),"VALIDO"==a?c=!0:"Err-1"==a?($(".mensaje-error").show(),$(".mensaje-error").text("Debe completar todos los campos.")):marcar_errores(a);break;case"Tour":a=$.ajax({type:"POST",url:"/PHP/Validaciones.php",data:{tipo:"Tour",datos:JSON.stringify(b)},global:!1,async:!1,success:function(a){return a}}).responseText,console.log(a),"VALIDO"==a?c=!0:"Err-1"==a?($(".mensaje-error").show(),$(".mensaje-error").text("Debe completar todos los campos.")):marcar_errores(a);break;case"Transfer_in":a=$.ajax({type:"POST",url:"/PHP/Validaciones.php",data:{tipo:"Transfer-in",datos:JSON.stringify(b)},global:!1,async:!1,success:function(a){return a}}).responseText,console.log(a),"VALIDO"==a?c=!0:"Err-1"==a?($(".mensaje-error").show(),$(".mensaje-error").text("Debe completar todos los campos.")):marcar_errores(a);break;case"Transfer_out":a=$.ajax({type:"POST",url:"/PHP/Validaciones.php",data:{tipo:"Transfer-out",datos:JSON.stringify(b)},global:!1,async:!1,success:function(a){return a}}).responseText,console.log(a),"VALIDO"==a?c=!0:"Err-1"==a?($(".mensaje-error").show(),$(".mensaje-error").text("Debe completar todos los campos.")):marcar_errores(a);break;case"FIESTA-IDA":a=$.ajax({type:"POST",url:"/PHP/Validaciones.php",data:{tipo:"Fiestas_ida",datos:JSON.stringify(b)},global:!1,async:!1,success:function(a){return a}}).responseText,console.log(a),"VALIDO"==a?c=!0:"Err-1"==a?($(".mensaje-error").show(),$(".mensaje-error").text("Debe completar todos los campos.")):marcar_errores(a);break;case"FIESTA-VUELTA":a=$.ajax({type:"POST",url:"/PHP/Validaciones.php",data:{tipo:"Fiestas_vuelta",datos:JSON.stringify(b)},global:!1,async:!1,success:function(a){return a}}).responseText,console.log(a),"VALIDO"==a?c=!0:"Err-1"==a?($(".mensaje-error").show(),$(".mensaje-error").text("Debe completar todos los campos.")):marcar_errores(a);break;case"FIESTA-IDA-VUELTA":a=$.ajax({type:"POST",url:"/PHP/Validaciones.php",data:{tipo:"Fiestas_ida_vuelta",datos:JSON.stringify(b)},global:!1,async:!1,success:function(a){return a}}).responseText,console.log(a),"VALIDO"==a?c=!0:"Err-1"==a?($(".mensaje-error").show(),$(".mensaje-error").text("Debe completar todos los campos.")):marcar_errores(a)}return c}function reset_errores(){$(".mensaje-error").hide(),$("#pasajeros-input").css("border-bottom","1px solid #aaaaaa"),$("#tipo-select_1").css("border-bottom","1px solid #aaaaaa"),$("#tipo-select_2").css("border-bottom","1px solid #aaaaaa")}function rellenar(a){switch(a){case"Direccion_Origen":var b=$("#direccion_ida_origen_fiestas_idavuelta").val();$("#direccion_vuelta_destino_fiestas_idavuelta").val(b);break;case"Barrio_Origen":var c=$("#barrio_ida_origen_fiestas_idavuelta").val();$("#barrio_vuelta_destino_fiestas_idavuelta").val(c);break;case"Localidad_Origen":var d=$("#localidad_ida_origen_fiestas_idavuelta").val();$("#localidad_vuelta_destino_fiestas_idavuelta").val(d);break;case"Direccion_Destino":var e=$("#direccion_ida_destino_fiestas_idavuelta").val();$("#direccion_vuelta_origen_fiestas_idavuelta").val(e);break;case"Barrio_Destino":var f=$("#barrio_ida_destino_fiestas_idavuelta").val();$("#barrio_vuelta_origen_fiestas_idavuelta").val(f);break;case"Localidad_Destino":var g=$("#localidad_ida_destino_fiestas_idavuelta").val();$("#localidad_vuelta_origen_fiestas_idavuelta").val(g);break;case"Cantidad_Pasajeros":var h=$("#cant_pasajeros_ida_fiestas_idavuelta").val();$("#cant_pasajeros_vuelta_fiestas_idavuelta").val(h)}}function filtrar_divs(v){var c;if("Oportunidad"===v){c=$("#origen_oportunidad").val();var j=$("#destino_oportunidad").val(),k=$("#fecha_oportunidad").val()}if(""!=c||""!=j||""!=k){var a=[],e=[],f=[],d=[],b=[],g=[];for(let h=0;h<atributos.length;h++){function w(d,a){let b=new Date(d),e=b.getDate()+1,f=b.getMonth()+1,c=b.getFullYear();return(a=a.replace("MM",f.toString().padStart(2,"0"))).indexOf("yyyy")> -1?a=a.replace("yyyy",c.toString()):a.indexOf("yy")> -1&&(a=a.replace("yy",c.toString().substr(2,2))),a=a.replace("dd",e.toString().padStart(2,"0"))}datos=atributos[h].split(","),console.log(c),datos[0].toLowerCase().includes(c.toLowerCase())&&""!=c&&a.push(h),datos[1].toLowerCase().includes(j.toLowerCase())&&""!=j&&e.push(h),datos[2]==w(k,"dd-MM-yyyy")&&f.push(h)}if(0!=a.length&&0!=e.length)for(let o=0;o<a.length;o++)for(let l=0;l<e.length;l++)a[o]==e[l]&&d.push(e[l]);else 0==a.length&&0!=e.length&&""==c?d=e:0!=a.length&&0==e.length&&""==j&&(d=a);if(0!=a.length&&0!=f.length)for(let p=0;p<a.length;p++)for(let m=0;m<f.length;m++)a[p]==f[m]&&b.push(f[m]);else 0==a.length&&0!=f.length&&""==c?b=f:0!=a.length&&0==f.length&&""==k&&(b=a);if(0!=d.length&&0!=b.length)for(let q=0;q<d.length;q++)for(let n=0;n<b.length;n++)d[q]==b[n]&&g.push(b[n]);else 0==d.length&&0!=b.length&&""==c&&""==j?g=b:0!=d.length&&0==b.length&&""==c&&""==k&&(g=d);console.log(g);for(let i=0;i<atributos.length;i++)if(datos=atributos[i].split(","),0!=g.length){$(".oportunidades-list").show(),$(".list-empty").css("display","none");var u=!1;for(let r=0;r<g.length;r++)i==g[r]?($("#Opo-"+i).show(),u=!0):!0!=u&&$("#Opo-"+i).hide()}else for(let s=0;s<atributos.length;s++)$("#Opo-"+s).hide(),$(".oportunidades-list").hide(),$(".list-empty").css("display","flex")}else for(let t=0;t<atributos.length;t++)$("#Opo-"+t).show(),$(".oportunidades-list").show(),$(".list-empty").css("display","none")}function eliminar_filtros(a){switch(a){case"Oportunidad":$("#origen_oportunidad").val(""),$("#destino_oportunidad").val(""),$("#fecha_oportunidad").val("");break;case"Ofertas":case"Promociones":$("#origen_2").val(""),$("#destino_2").val(""),$("#fecha_2").val("")}filtrar_divs(a)}function closeModal(){$("#modal").hide(),$("#modal").html("")}let viaje_de_tipo_fiesta=0;function notificarTransportistas(){let a=tipoViaje(document.getElementById("select_users").value);console.log(viaje_de_tipo_fiesta),6==a.length?transportistasAptos({fecha:document.getElementById(a[0]).value,hora:document.getElementById(a[1]).value,cantidad_pasajeros:document.getElementById(a[2]).value,mascotas:document.getElementById(a[3]).value,origen:document.getElementById(a[4]).value,destino:document.getElementById(a[5]).value,pet_friendly:document.getElementById(a[6]).value,fiesta:viaje_de_tipo_fiesta},!1):transportistasAptos({fecha:document.getElementById(a[0]).value,hora:document.getElementById(a[1]).value,cantidad_pasajeros:document.getElementById(a[2]).value,fecha_vuelta:document.getElementById(a[3]).value,hora_vuelta:document.getElementById(a[4]).value,cantidad_pasajeros_vuelta:document.getElementById(a[5]).value,mascotas:document.getElementById(a[6]).value,origen:document.getElementById(a[4]).value,destino:document.getElementById(a[5]).value,origen_vuelta:document.getElementById(a[4]).value,destino_vuelta:document.getElementById(a[5]).value,fiesta:viaje_de_tipo_fiesta},!0)}const transportistasAptos=(a,b)=>{setTimeout(()=>{$.ajax({type:"POST",url:"/PHP/topTransportistas.php",data:{data:JSON.stringify(a),fiesta_ida_vuelta:b,id_viaje:id_cotizacion},success:function(a){console.log(a);var b=JSON.parse(a);console.log(b),enviarMailsTransportistas(b)}})},1e3)};function enviarMailsTransportistas(a){setTimeout(()=>{let c;c=a.length>5?5:a.length;for(let b=0;b<c;b++)$.ajax({type:"POST",url:"/Mail/mail-Cotizacion-Invitacion.php",data:{id_viaje:id_cotizacion,mail:a[b].MAIL},success:function(a){console.log(a)}})},1e3)}function tipoViaje(a){switch(a){case"1":inputs=["fecha_salida","hora","cant_pasajeros","mascotas_traslado","localidad_traslado_origen","localidad_traslado_destino","mascotas_traslado"];break;case"2":inputs=["fecha_salida_tour","hora_tour","cant_pasajeros_tour","mascota_tour","localidad_tour","destino_tour","mascota_tour"];break;case"3":inputs=1==document.getElementById("select_transfer").value?["fecha_regreso_transfer_in","hora_transfer_in","cant_pasajeros_transfer_in","mascotas_transfer_in","aeropuerto_transfer_in","localidad_transfer_in"]:["fecha_regreso_transfer_out","hora_transfer_out","cant_pasajeros_transfer_out","mascotas_transfer_out","localidad_transfer_out","aeropuerto_transfer_out"];break;default:inputs=1==document.getElementById("select_fiesta").value?["fecha_salida_fiestas_ida","hora_fiesta_ida","cant_pasajeros_fiesta_ida","mascotas_fiestas_ida","localidad_fiestas_ida","fiestasida_origen_localidad"]:2==document.getElementById("select_fiesta").value?["fecha_regreso_fiestas_vuelta","hora_fiesta_vuelta","cant_pasajeros_fiesta_vuelta","mascotas_fiestas_vuelta","fiestasvuelta_origen_localidad","localidad_fiesta_vuelta"]:["fecha_salida_fiestas_idavuelta","hora_ida_fiestas_idavuelta","cant_pasajeros_ida_fiestas_idavuelta","fecha_regreso_fiestas_idavuelta","hora_vuelta_fiestas_idavuelta","cant_pasajeros_vuelta_fiestas_idavuelta","mascotas_fiestas_idavuelta","localidad_ida_origen_fiestas_idavuelta","localidad_ida_destino_fiestas_idavuelta","localidad_vuelta_origen_fiestas_idavuelta","localidad_vuelta_destino_fiestas_idavuelta"],viaje_de_tipo_fiesta=1}return inputs}