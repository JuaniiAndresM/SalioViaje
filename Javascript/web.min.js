function datavalue_oportunidades(){var a=document.getElementsByClassName("oportunidad").length;if(console.log(a),0!=a)for(var b=0;b<a;b++){let c=$("#Opo-"+b).data("value");atributos.push(c)}}window.addEventListener("load",()=>{$("#header").load("/web/foreman/header.php"),$("#footer").load("/web/footer.html"),$("#flotant-promo").load("/web/flotant-promo.html"),agregar_visita(),traer_oportunidades(),setTimeout(()=>{flotantPromo()},3e3),$("#filters").hide(),$("#filters2").hide(),document.getElementById("pre-loader").classList.toggle("load")});const cerrarsesion=()=>{fetch("https://www.salioviaje.com.uy/PHP/cerrarSession.php").then(()=>{$("#header").load("/web/foreman/header.php"),location.reload()})};function dashboard(){window.location="https://www.salioviaje.com.uy/Dashboard"}function agregar_visita(){$.ajax({type:"POST",url:"/PHP/procedimientosForm.php",data:{tipo:"visita"}})}function suscripcion(){var a=$("#mail-footer").val();$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Mail/mail-Bienvenida.php",data:{email:a},success:function(a){console.log(a),1==a?($(".suscribirse-mail").hide(),$(".suscrito-mail").show(),$("#mail-footer").val(" "),setTimeout(()=>{$(".suscribirse-mail").show(),$(".suscrito-mail").hide()},5e3)):console.log(a)}})}function comprar_oportunidad(a,b){1==b?$.ajax({type:"POST",url:"https://www.salioviaje.com.uy/Panel/modal.php",data:{opcion:6,data:a},success:function(a){console.log(a),document.getElementById("modal").style.display="flex",$("#modal").html(a)}}):(abrir_ventana(a),comprar_oportunidad_function(a),closeModal())}function abrir_ventana(a){window.open("https://www.salioviaje.com.uy/Espera/"+a,"mypopup","directories=no,menubar=no,status=no,titlebar=no,toolbar=no,width=550,height=700")}function detalles_oportunidad(a){location.href="/Oportunidad/"+a}function traer_oportunidades(){$.ajax({type:"POST",url:"/PHP/Tablas/oportunidadesIndex.php",success:function(a){" "==a||"0"==a?$(".list-empty").css("display","flex"):($(".list-empty").hide(),$("#oportunidades-tabla").html(a),$("#oportunidades-tabla").show(),datavalue_oportunidades())}})}function traer_cotizacion(){$(".list-empty-cotizacion").show(),$(".Cotizaciones-list").hide()}function filtros(a){switch(a){case 1:$("#filters").toggle("");break;case 2:$("#filters2").toggle("")}}function filtrar_divs(v){var c;if("Oportunidad"===v){c=$("#origen_oportunidad").val();var j=$("#destino_oportunidad").val(),k=$("#fecha_oportunidad").val()}if(""!=c||""!=j||""!=k){var a=[],e=[],f=[],d=[],b=[],g=[];for(let h=0;h<atributos.length;h++){function w(d,a){let b=new Date(d),e=b.getDate()+1,f=b.getMonth()+1,c=b.getFullYear();return(a=a.replace("MM",f.toString().padStart(2,"0"))).indexOf("yyyy")> -1?a=a.replace("yyyy",c.toString()):a.indexOf("yy")> -1&&(a=a.replace("yy",c.toString().substr(2,2))),a=a.replace("dd",e.toString().padStart(2,"0"))}datos=atributos[h].split(","),console.log(c),datos[0].toLowerCase().includes(c.toLowerCase())&&""!=c&&a.push(h),datos[1].toLowerCase().includes(j.toLowerCase())&&""!=j&&e.push(h),datos[2]==w(k,"dd-MM-yyyy")&&f.push(h)}if(0!=a.length&&0!=e.length)for(let o=0;o<a.length;o++)for(let l=0;l<e.length;l++)a[o]==e[l]&&d.push(e[l]);else 0==a.length&&0!=e.length&&""==c?d=e:0!=a.length&&0==e.length&&""==j&&(d=a);if(0!=a.length&&0!=f.length)for(let p=0;p<a.length;p++)for(let m=0;m<f.length;m++)a[p]==f[m]&&b.push(f[m]);else 0==a.length&&0!=f.length&&""==c?b=f:0!=a.length&&0==f.length&&""==k&&(b=a);if(0!=d.length&&0!=b.length)for(let q=0;q<d.length;q++)for(let n=0;n<b.length;n++)d[q]==b[n]&&g.push(b[n]);else 0==d.length&&0!=b.length&&""==c&&""==j?g=b:0!=d.length&&0==b.length&&""==c&&""==k&&(g=d);console.log(g);for(let i=0;i<atributos.length;i++)if(datos=atributos[i].split(","),0!=g.length){$(".oportunidades-list").show(),$(".list-empty").css("display","none");var u=!1;for(let r=0;r<g.length;r++)i==g[r]?($("#Opo-"+i).show(),u=!0):!0!=u&&$("#Opo-"+i).hide()}else for(let s=0;s<atributos.length;s++)$("#Opo-"+s).hide(),$(".oportunidades-list").hide(),$(".list-empty").css("display","flex")}else for(let t=0;t<atributos.length;t++)$("#Opo-"+t).show(),$(".oportunidades-list").show(),$(".list-empty").css("display","none")}function eliminar_filtros(a){"Oportunidad"==a&&(document.getElementById("origen_oportunidad").value="",document.getElementById("destino_oportunidad").value="",document.getElementById("fecha_oportunidad").value=""),filtrar_divs(a)}function obtenerDiaSemana(a){var c;let b=a.split("-");a=b[2]+"-"+b[1]+"-"+b[0],console.log((c=a+" 00:00:00",["DOM","LUN","MAR","MIE","JUE","VIE","SAB","DOM",][new Date(c).getDay()]))}const flotantPromo=()=>{let a=document.getElementById("flotant-promo");null!=a&&a.classList.toggle("active")};function closeModal(){$("#modal").hide(),$("#modal").html("")}